# Ch3 - 도커를 사용해보자

# 1. 도커를 사용하려면

## 도커는 기본적으로 리눅스용이지만 윈도우와 macOS에서도 사용할 수 있다

- 도커를 사용하려면 도커 엔진이라는 무료 소프트웨어를 설치해야 한다

### 도커 환경을 구축하는 세 가지 방법

1. 리눅스 컴퓨터에서 도커 사용하기
2. 가상 머신이나 렌탈 환경에 도커를 설치하고 윈도우나 macOS를 통해 사용하기
3. 윈도우/macOS용 도커 사용하기

## 윈도우/macOS용 도커 사용하기

### 윈도우와 macOS에서는 리눅스가 들어있는 패키지(도커 데스크톱)을 사용한다

- 리눅스 컴퓨터에 도커를 설치하려면 도커 엔진만 있으면 되지만 윈도우나 macOS에서는 리눅스 운영체제 등의 실행 환경이 추가로 필요하기 때문에 이들을 함께 패키지로 묶어 배포한다.
- 완전한 윈도우/macOS용 소프트웨어는 아니며 사용자에게는 보이지 않는 가상의 리눅스 환경을 만들고 이 환경에서 도커 엔진을 구동하는 구조다.
- 앞서 본 2.와 비슷하지만 가상화 부분에서 약간 차이가 있다.
- 2.는 사용자가 명시적으로 가상화 소프트웨어를 설치하고, 그 위에 리눅스를 설치한 다음 여기에 도커 엔진을 설치하는 방법이지만, 도커 데스크톱은 사용자가 가상화 환경이나 리눅스를 신경쓰지 않고도 도커를 사용할 수있다.

### 도커 데스크톱은 일반적인 소프트웨어처럼 사용한다

- 다만 도커 데스크톱을 실행한 후 실제 도커 엔진을 다룰 때는 드래그 앤 드롭같은 마우스를 이용한 조작은 불가능하며, 명령형 인터페이스를 통래 조작해야 한다.

### 운영체제가 두 개라니 괜찮을까?

- 리눅스를 신경쓰지 않아도 된다. 도커가 전용으로 사용하는 숨겨진 운영체제와 같다.
- 도커 데스크톱 패키지를 삭제하면 이 리눅스도 함께 삭제된다.

# 2. 도커의 조작 방법과 명령 프롬프트 및 터미널 실행

## 도커는 명령 프롬프트 또는 터미널에서 다룬다

- 도커는 실행 중이어도 전용 입력 화면이 없기 때문에 도커에 명령을 전달할 별도의 소프트웨어를 사용한다.
    - 윈도우에서는 명령 프롬프트, macOS에서는 터미널이 쓰인다.
- 컴퓨터에 명령을 전달하는 소프트웨어를 뭉뚱그려 `터미널 소프트웨어`라고 한다.

## 명령 프롬프트 및 터미널에 대해 주의할 점

- 이름이 penguin인 컨테이너를 실행하려면 `docker run penguin`, 중지하려면 `docker stop penguin`이라고 입력하면 된다.

### 프롬프트는 현재 사용자를 나타낸다

- [사용자명]@[호스트명]
    - sehyun@MacBookPro

### 명령 프롬프트 및 터미널을 종료해도 도커는 종료되지 않는다

- 도커 엔진과 터미널 소프트웨어는 완전히 별개의 소프트웨어이다. 그러므로 터미널 소프트웨어를 종료하더라도 도커 엔진이 종료되는 것은 아니다.
- 도커 엔진을 종료하려면 따로 엔진을 종료하려는 명령이 필요하다. 이때 모든 컨테이너가 종료된다.
- 단, 서버에서 도커를 사용 중이라면 도커 엔진과 함께 모든 컨테이너가 종료되므로 도커 엔진을 종료하는 경우는 드물다.

## SSH란? 원격으로 컴퓨터에 접속하기

- 도커를 실제로 운영하는 환경에서는 자신의 컴퓨터가 아닌 리눅스 서버에 설치된 도커 엔진을 다루게 된다.
    - 이때는 먼저 `SSH 소프트웨어(SSH 클라이언트)`를 사용해 서버에 접속한 다음 도커 엔진을 조작한다.
- SSH 소프트웨어는 터미널과 비슷하지만 원격지에 있는 컴퓨터를 다루기 위한 것으로, 처음에 사용자명이나 패스워드를 입력하거나 통신을 암호화하는 등 원격 조작에 필요한 기능을 갖추고 있다.
    - 대표적인 SSH 소프트웨어로 Putty, Tera Term 등이 있다.